import { PrismaClient } from '@prisma/client'
import { PrismaLibSql } from '@prisma/adapter-libsql'
import path from 'path'

const adapter = new PrismaLibSql({ url: `file:${path.join(process.cwd(), 'prisma', 'dev.db')}` })
const prisma = new PrismaClient({ adapter })

async function main() {
    // Find the AI answer
    const aiAnswer = await prisma.expertAnswer.findFirst({
        where: { isAiGenerated: true },
        include: {
            expert: { select: { name: true } },
            question: { select: { title: true } }
        }
    })

    if (aiAnswer) {
        console.log('\n=== AI Answer Status ===')
        console.log('Answer ID:', aiAnswer.id)
        console.log('Question:', aiAnswer.question.title)
        console.log('Generated by:', aiAnswer.expert?.name)
        console.log('isAiGenerated:', aiAnswer.isAiGenerated)
        console.log('aiValidatedBy:', aiAnswer.aiValidatedBy || 'Not yet validated')
        console.log('aiValidatedAt:', aiAnswer.aiValidatedAt ? aiAnswer.aiValidatedAt.toISOString() : 'N/A')
        console.log('Content preview:', aiAnswer.content.substring(0, 200) + '...')
    } else {
        console.log('No AI-generated answer found')
    }
}

main().catch(console.error).finally(() => prisma.$disconnect())
